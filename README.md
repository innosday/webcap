λ„¤, μ•κ² μµλ‹λ‹¤. **μ„¤μΉ κ³Όμ •λ¶€ν„° μ¤λ¥ ν•΄κ²°(NumPy), ν΄λΌμ΄μ–ΈνΈ μ ‘μ† λ°©λ²•κΉμ§€ λ¨λ‘ ν¬ν•¨λ μµμΆ… μ™„μ„±λ³Έ**μ…λ‹λ‹¤.

μ΄ λ‚΄μ©μ„ κ·Έλ€λ΅ λ³µμ‚¬ν•΄μ„ `README.md` νμΌμ— λ¶™μ—¬λ„£μΌμ‹λ©΄ λ©λ‹λ‹¤.

-----

````markdown
# π“Έ Raspberry Pi Smart CCTV & Controller

λΌμ¦λ² λ¦¬νμ΄(Raspberry Pi)μ™€ νμ΄μΉ΄λ©”λΌ(Picamera2)λ¥Ό ν™μ©ν•μ—¬ μ‹¤μ‹κ°„ μμƒμ„ μ›ΉμΌλ΅ μ†΅μ¶ν•κ³ , μ›Ή λΈλΌμ°μ €λ¥Ό ν†µν•΄ ν•λ“μ›¨μ–΄(LED, μΉ΄λ©”λΌ λ“±)λ¥Ό μ›κ²© μ μ–΄ν•λ” IoT ν”„λ΅μ νΈμ…λ‹λ‹¤.

FastAPIμ λΉ„λ™κΈ°(Asynchronous) μ²λ¦¬λ¥Ό ν™μ©ν•μ—¬ κ³ ν™”μ§ μμƒ μ¤νΈλ¦¬λ° μ¤‘μ—λ„ μ§€μ—° μ—†μ΄ λ…λ Ήμ„ μν–‰ν•  μ μλ„λ΅ μ„¤κ³„λμ—μµλ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥ (Features)

* **π“Ί μ‹¤μ‹κ°„ λΉ„λ””μ¤ μ¤νΈλ¦¬λ°:** Picamera2μ™€ OpenCVλ¥Ό ν™μ©ν• μ €μ§€μ—° MJPEG μ¤νΈλ¦¬λ°.
* **π“Έ μ›κ²© μ‚¬μ§„ μ΄¬μ:** μ›Ή λ²„νΌ ν΄λ¦­ μ‹ λΌμ¦λ² λ¦¬νμ΄ λ΅μ»¬ μ €μ¥μ†μ— κ³ ν™”μ§ μ‚¬μ§„ μ €μ¥ (λ‚ μ§/μ‹κ°„ νμΌλ…).
* **π’΅ LED μ›κ²© μ μ–΄:** GPIOλ¥Ό ν™μ©ν•μ—¬ μ›Ήμ—μ„ LED On/Off μ μ–΄.
* **β›” μ›κ²© μ‹μ¤ν… μΆ…λ£:** μ›Ή μΈν„°νμ΄μ¤μ—μ„ λΌμ¦λ² λ¦¬νμ΄ μ„λ²„ ν”„λ΅κ·Έλ¨ μ•μ „ μΆ…λ£.
* **π“± λ°μ‘ν• μ›Ή ν΄λΌμ΄μ–ΈνΈ:** λ…ΈνΈλ¶, νƒλΈ”λ¦Ώ, μ¤λ§νΈν° λ“± λ‹¤μ–‘ν• κΈ°κΈ°μ—μ„ λ³„λ„ μ•± μ„¤μΉ μ—†μ΄ λΈλΌμ°μ €λ΅ μ ‘μ† κ°€λ¥.

## π› οΈ κΈ°μ  μ¤νƒ (Tech Stack)

* **Hardware:** Raspberry Pi 4 (or 3B+), Pi Camera Module, LED, Resistor.
* **OS:** Raspberry Pi OS (Bookworm/Bullseye)
* **Backend:** Python 3, FastAPI, Uvicorn
* **Libraries:** Picamera2 (System Lib), OpenCV, GPIOZero
* **Frontend:** HTML5, CSS3, Vanilla JavaScript

## π” ν•λ“μ›¨μ–΄ μ—°κ²° (Hardware Wiring)

| μ»΄ν¬λ„νΈ | λΌμ¦λ² λ¦¬νμ΄ ν•€ (BCM) | λ¬Όλ¦¬μ  ν•€ λ²νΈ (Physical) |
| :--- | :--- | :--- |
| **LED (+)** | GPIO 17 | Pin 11 |
| **LED (-)** | GND | Pin 6, 9, etc. |

---

## π€ μ„¤μΉ λ° μ‹¤ν–‰ λ°©λ²• (Installation)

### 1. ν™κ²½ μ„¤μ • (Raspberry Pi)
μ΄ ν”„λ΅μ νΈλ” λΌμ¦λ² λ¦¬νμ΄ μ‹μ¤ν… λΌμ΄λΈλ¬λ¦¬μΈ `Picamera2`λ¥Ό μ‚¬μ©ν•λ―€λ΅, κ°€μƒν™κ²½ μƒμ„± μ‹ μ‹μ¤ν… ν¨ν‚¤μ§€ μ ‘κ·Ό μµμ…μ΄ ν•„μμ…λ‹λ‹¤.

```bash
# 1. μ €μ¥μ† ν΄λ΅  (λλ” ν”„λ΅μ νΈ ν΄λ” μƒμ„±)
git clone [λ ν¬μ§€ν† λ¦¬ μ£Όμ†]
cd [ν”„λ΅μ νΈ ν΄λ”]

# 2. κ°€μƒν™κ²½ μƒμ„± (μ¤‘μ”: --system-site-packages μµμ… ν•„μ)
python -m venv venv --system-site-packages

# 3. κ°€μƒν™κ²½ ν™μ„±ν™”
source venv/bin/activate

# 4. ν•„μ λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ
pip install fastapi uvicorn[standard] opencv-python multipart gpiozero
````

### 2\. β οΈ μ¤‘μ”: NumPy νΈν™μ„± λ¬Έμ  ν•΄κ²°

`opencv-python` μ„¤μΉ μ‹ μµμ‹  λ²„μ „μ NumPyκ°€ μ„¤μΉλλ©΄μ„, λΌμ¦λ² λ¦¬νμ΄ μ‹μ¤ν…μ— λ‚΄μ¥λ λΌμ΄λΈλ¬λ¦¬μ™€ μ¶©λν•μ—¬ `ValueError: numpy.dtype size changed` μ—λ¬κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.

κ°€μƒν™κ²½μ μµμ‹  NumPyλ¥Ό μ κ±°ν•κ³  μ‹μ¤ν… NumPyλ¥Ό μ‚¬μ©ν•λ„λ΅ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
# κ°€μƒν™κ²½ λ‚΄μ μµμ‹  numpy μ‚­μ 
pip uninstall numpy

# (μ§λ¬Έμ΄ λ‚μ¤λ©΄ yλ¥Ό μ…λ ¥ν•μ—¬ μ‚­μ ν•μ„Έμ”. 'Package not found'κ°€ λ‚μ¬ λ•κΉμ§€ λ°λ³µ)
```

### 3\. μ„λ²„ μ‹¤ν–‰ (Server Side)

λΌμ¦λ² λ¦¬νμ΄ ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

```bash
python main.py
```

ν„°λ―Έλ„μ— `Uvicorn running on http://0.0.0.0:8000` λ©”μ‹μ§€κ°€ λ¨λ©΄ μ„±κ³µμ…λ‹λ‹¤.

-----

## π’» ν΄λΌμ΄μ–ΈνΈ μ ‘μ† λ°©λ²• (Client Side)

μ΄ ν”„λ΅μ νΈλ” λΌμ¦λ² λ¦¬νμ΄κ°€ μ„λ²„κ°€ λκ³ , λ…ΈνΈλ¶(λλ” μ¤λ§νΈν°)μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ λ©λ‹λ‹¤.

### 1\. λΌμ¦λ² λ¦¬νμ΄ IP ν™•μΈ

λΌμ¦λ² λ¦¬νμ΄ ν„°λ―Έλ„μ—μ„ μ•„λ λ…λ Ήμ–΄λ΅ IP μ£Όμ†λ¥Ό ν™•μΈν•©λ‹λ‹¤.

```bash
hostname -I
# μμ‹ κ²°κ³Ό: 192.168.0.15
```

### 2\. μ›Ή ν΄λΌμ΄μ–ΈνΈ μ„¤μ •

λ…ΈνΈλ¶μ— μ €μ¥λ `index.html` νμΌμ„ λ©”λ¨μ¥μ΄λ‚ μ½”λ“ μ—λ””ν„°λ΅ μ—½λ‹λ‹¤.
μ½”λ“ λ‚΄λ¶€μ IP μ£Όμ†λ¥Ό μ„μ—μ„ ν™•μΈν• λΌμ¦λ² λ¦¬νμ΄ IPλ΅ λ³€κ²½ν•©λ‹λ‹¤.

```javascript
// index.html μμ • μμ‹ (λ‘ κµ°λ° μμ • ν•„μ”)
<img src="[http://192.168.0.15:8000/video_feed](http://192.168.0.15:8000/video_feed)" ... >
const PI_API_URL = "[http://192.168.0.15:8000/action](http://192.168.0.15:8000/action)";
```

### 3\. μ ‘μ† λ° μ μ–΄

1.  μμ •λ `index.html` νμΌμ„ λ”λΈ” ν΄λ¦­ν•μ—¬ λΈλΌμ°μ €(Chrome, Edge λ“±)λ΅ μ—½λ‹λ‹¤.
2.  μ‹¤μ‹κ°„ ν™”λ©΄μ΄ λ³΄μ΄λ”μ§€ ν™•μΈν•κ³ , λ²„νΌμ„ λλ¬ LED μ μ–΄ λ° μΊ΅μ² κΈ°λ¥μ„ ν…μ¤νΈν•©λ‹λ‹¤.

-----

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅° (Directory Structure)

```
π“¦ Raspberry-Pi-CCTV
 β”£ π“‚ venv                 # κ°€μƒν™κ²½ ν΄λ”
 β”£ π“ main.py              # FastAPI μ„λ²„ (μμƒ μ†΅μ¶ + μ μ–΄ λ΅μ§)
 β”£ π“ index.html           # μ›Ή ν΄λΌμ΄μ–ΈνΈ νμΌ (λ…ΈνΈλ¶μ—μ„ μ‹¤ν–‰)
 β”£ π“ README.md            # ν”„λ΅μ νΈ λ¬Έμ„
 β”— π–ΌοΈ capture_2024...jpg   # μΊ΅μ²λ μ΄λ―Έμ§€κ°€ μ €μ¥λλ” κ³³
```

## π› νΈλ¬λΈ”μν… (Troubleshooting)

**Q. `ValueError: numpy.dtype size changed` λλ” `binary incompatibility` μ—λ¬κ°€ λ°μƒν•΄μ”.**

  * **A.** μ„¤μΉ λ‹¨κ³„ 2λ²μ„ μ°Έκ³ ν•μ„Έμ”. `pip uninstall numpy`λ¥Ό μν–‰ν•μ—¬ κ°€μƒν™κ²½μ μ¶©λν•λ” NumPyλ¥Ό μ κ±°ν•λ©΄ ν•΄κ²°λ©λ‹λ‹¤.

**Q. `ModuleNotFoundError: No module named 'picamera2'` μ—λ¬κ°€ λ°μƒν•΄μ”.**

  * **A.** κ°€μƒν™κ²½μ„ λ§λ“¤ λ• `--system-site-packages` μµμ…μ„ λΉ λ¨λ ΈκΈ° λ•λ¬Έμ…λ‹λ‹¤. `pyvenv.cfg` νμΌμ—μ„ `include-system-site-packages = true`λ΅ μμ •ν•κ±°λ‚ κ°€μƒν™κ²½μ„ λ‹¤μ‹ μƒμ„±ν•΄μ•Ό ν•©λ‹λ‹¤.

**Q. μ›Ήμ‚¬μ΄νΈμ—μ„ μμƒμ΄ μ• λ‚μ¤κ³  μ—‘λ°•μ΄ λ– μ”.**

  * **A.** `index.html` νμΌ μ•μ IP μ£Όμ†κ°€ ν„μ¬ λΌμ¦λ² λ¦¬νμ΄μ IPμ™€ μΌμΉν•λ”μ§€ ν™•μΈν•μ„Έμ”. λν• λΌμ¦λ² λ¦¬νμ΄μ™€ λ…ΈνΈλ¶μ΄ \*\*κ°™μ€ μ™€μ΄νμ΄(κ³µμ κΈ°)\*\*μ— μ—°κ²°λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

**Q. ν™”λ©΄μ— μ‚¬λμ΄ νλ—κ²(Blue) λ‚μ™€μ”.**

  * **A.** `main.py` μ½”λ“ λ‚΄μ— `cv2.cvtColor(frame, cv2.COLOR_RGB2BGR)` λ³€ν™ μ½”λ“κ°€ μλ”μ§€ ν™•μΈν•μ„Έμ”.

-----

## π“ License

This project is open source and available under the [MIT License](https://www.google.com/search?q=LICENSE).

```
```
